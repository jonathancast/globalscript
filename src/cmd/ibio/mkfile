< $PLAN9/src/mkhdr

< $GLOBALSCRIPT/src/mkhdr

OFILES=\
	ibio.$O \
	thread.$O \
	env.$O \
	channel.$O \
	iport.$O \
	oport.$O \
	external.$O \
	stat.$O \
	gsstringeval.$O \
	$SYSTEM/uxio.$O \

TARG=ibio

< $PLAN9/src/mkone
< $GLOBALSCRIPT/src/mkcommon

$PROG: $GLOBALSCRIPT/lib/libglobalscript.a

all install:V: test

%.$O: $GLOBALSCRIPT/include/libglobalscript.h
ibio.$O: ibio.h
thread.$O: ibio.h
env.$O: ibio.h
channel.$O: ibio.h
iport.$O: ibio.h
oport.$O: ibio.h
external.$O: ibio.h
stat.$O: ibio.h
gsstringeval.$O: ibio.h
unix/uxio.$O: ibio.h

test:V: 
    :

integration-test:V: test test-rc

test-rc:V: rc/test $O.ibio
    ./rc/test

clean:VN:
	rm -f ibiothreadmain.c
	rm -f *.$O
	rm -f $PROG

%.$O:	%.c
	$CC $CFLAGS -o $target $stem.c
